<?xml version="1.0" encoding="UTF-8"?>
<fmiModelDescription
  fmiVersion="2.0"
  modelName="{{ model_name }}"
  description="{{ model_description }}"
  generationTool="ONNX2FMI"
  guid="{{ model_guid }}"
  numberOfEventIndicators="0">

  <ModelExchange
    modelIdentifier="{{ model_name }}"
    canNotUseMemoryManagementFunctions="{{ canNotUseMemoryManagementFunctions }}"
    canGetAndSetFMUstate="{{ canGetAndSetFMUstate }}"
    canSerializeFMUstate="{{ canSerializeFMUstate }}">
    <SourceFiles>
      <File name="all.c"/>
    </SourceFiles>
  </ModelExchange>

  <CoSimulation
    modelIdentifier="{{ model_name }}"
    canHandleVariableCommunicationStepSize="{{ canHandleVariableCommunicationStepSize }}"
    canNotUseMemoryManagementFunctions="{{ canNotUseMemoryManagementFunctions }}"
    canGetAndSetFMUstate="{{ canGetAndSetFMUstate }}"
    canSerializeFMUstate="{{ canSerializeFMUstate }}">
    <SourceFiles>
      <File name="all.c"/>
    </SourceFiles>
  </CoSimulation>

  <LogCategories>
    <Category name="logEvents" description="Log events"/>
    <Category name="logStatusError" description="Log error messages"/>
  </LogCategories>

  <DefaultExperiment startTime="{{ startTime }}" stopTime="{{ stopTime }}"/>

  <ModelVariables>
    {%- for input in input_entries %}
    <ScalarVariable name="{{ input.name }}" valueReference="{{ input.index }}" causality="{{ input.causality }}" variability="{{ input.variability }}" description="{{ input.description }}">
      <{{ input.type.FMI2 }}/>
    </ScalarVariable>
    {%- endfor %}
    {%- for output in output_entries %}
    <ScalarVariable name="{{ output.name }}" valueReference="{{ output.index }}" causality="{{ output.causality }}" variability="{{ output.variability }}" description="{{ output.description }}">
      <{{ output.FMI2 }}/>
    </ScalarVariable>
    {%- endfor %}
  </ModelVariables>

  <ModelStructure>
    <Outputs>
    {%- for output in output_entries %}
      <Unknown index="{{ output.index }}"/>
    {%- endfor %}
    </Outputs>
    <InitialUnknowns>
    {%- for output in output_entries %}
      <Unknown index="{{ output.index }}"/>
    {%- endfor %}
    </InitialUnknowns>
  </ModelStructure>

</fmiModelDescription>
